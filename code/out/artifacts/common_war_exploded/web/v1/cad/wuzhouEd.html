
<!DOCTYPE html>
<!--[if IE 8]> <html lang="en" class="ie8 no-js"> <![endif]-->
<!--[if IE 9]> <html lang="en" class="ie9 no-js"> <![endif]-->
<!--[if !IE]><!-->
<html lang="en">
<!--<![endif]-->
<!-- BEGIN HEAD -->
<head>
    <meta charset="utf-8"/>
    <title>设计管理</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <meta content="" name="description"/>
    <meta content="" name="author"/>
    <!-- BEGIN GLOBAL MANDATORY STYLES -->
    <link href="/m/global/plugins/font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css"/>
    <link href="/m/global/plugins/simple-line-icons/simple-line-icons.min.css" rel="stylesheet" type="text/css"/>
    <link href="/m/global/plugins/bootstrap/css/bootstrap.min.css" rel="stylesheet" type="text/css"/>
    <link href="/m/global/plugins/uniform/css/uniform.default.css" rel="stylesheet" type="text/css"/>
    <!-- END GLOBAL MANDATORY STYLES -->
    <!-- BEGIN THEME STYLES -->
    <link href="/m/global/css/components.css" id="style_components" rel="stylesheet" type="text/css"/>
    <link href="/m/global/css/plugins.css" rel="stylesheet" type="text/css"/>
    <link href="/m/admin/layout/css/layout.css" rel="stylesheet" type="text/css"/>
    <link id="style_color" href="/m/admin/layout/css/themes/darkblue.css" rel="stylesheet" type="text/css"/>
    <link href="/m/admin/layout/css/custom.css" rel="stylesheet" type="text/css"/>
    <link href="/assets/jstree-3.3.8/themes/default/style.min.css" rel="stylesheet"/>
    <link href="/m/global/plugins/bootstrap-toastr/toastr.min.css" rel="stylesheet" type="text/css"/>
    <link href="/m/global/plugins/bootstrap-select/bootstrap-select.min.css"  rel="stylesheet" type="text/css"/>
    <link href="/m/global/plugins/bootstrap-datepicker/css/bootstrap-datepicker.min.css" rel="stylesheet"/>
    <link href="/m/global/plugins/bootstrap-datetimepicker/css/bootstrap-datetimepicker.min.css" rel="stylesheet"/>
    <link href="/m/global/plugins/jquery-file-upload/css/jquery.fileupload.css" rel="stylesheet"/>
    <link href="/m/global/plugins/jquery-file-upload/css/jquery.fileupload-ui.css" rel="stylesheet"/>
    <!-- END THEME STYLES -->
    <link rel="shortcut icon" href="/m/favicon.ico"/>
    <style id="print_style">
        #print_area {
            display: none;
        }
        .print_table {
            border-collapse: collapse;
            width: 100%;
            font-size: 14px;
        }
        .print_table td{
            border: solid #000 1px;
            height: 35px;
            text-align: center;
        }
        .print_table_big {
            border-collapse: collapse;
            width: 100%;
            font-size: 14px;
        }

        .print_table_big td{
            border: solid #000 1px;
            height: 45px;
            text-align: center;
        }


        .control-label.required::after {
            content: '* ';
            color: red;
            margin-left: 2px;
        }
    </style>
</head>
<!-- END HEAD -->
<!-- BEGIN BODY -->
<!-- DOC: Apply "page-header-fixed-mobile" and "page-footer-fixed-mobile" class to body element to force fixed header or footer in mobile devices -->
<!-- DOC: Apply "page-sidebar-closed" class to the body and "page-sidebar-menu-closed" class to the sidebar menu element to hide the sidebar by default -->
<!-- DOC: Apply "page-sidebar-hide" class to the body to make the sidebar completely hidden on toggle -->
<!-- DOC: Apply "page-sidebar-closed-hide-logo" class to the body element to make the logo hidden on sidebar toggle -->
<!-- DOC: Apply "page-sidebar-hide" class to body element to completely hide the sidebar on sidebar toggle -->
<!-- DOC: Apply "page-sidebar-fixed" class to have fixed sidebar -->
<!-- DOC: Apply "page-footer-fixed" class to the body element to have fixed footer -->
<!-- DOC: Apply "page-sidebar-reversed" class to put the sidebar on the right side -->
<!-- DOC: Apply "page-full-width" class to the body element to have full width page without the sidebar menu -->
<body class="page-full-width" ng-app="taskApp" >
<div>

</div>
<div class="clearfix" ng-controller="CommonBaseController">
</div>
<!-- BEGIN CONTAINER -->
<div class="page-container">
    <!-- BEGIN CONTENT -->
    <div class="page-content-wrapper">
        <div class="page-content"  style="background-color: #F1F3FA;">
            <div ui-view></div>
        </div>
    </div>
    <!-- END CONTENT -->
</div>
<!-- END CONTAINER -->
<!-- BEGIN FOOTER -->
<!-- END FOOTER -->
<!-- BEGIN JAVASCRIPTS(Load javascripts at bottom, this will reduce page load time) -->
<!-- BEGIN CORE PLUGINS -->
<!--[if lt IE 9]>
<script src="/m/global/plugins/respond.min.js"></script>
<script src="/m/global/plugins/excanvas.min.js"></script>
<![endif]-->
<script src="/m/global/plugins/jquery.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/jquery-migrate.min.js" type="text/javascript"></script>
<!-- IMPORTANT! Load jquery-ui.min.js before bootstrap.min.js to fix bootstrap tooltip conflict with jquery ui tooltip -->
<script src="/m/global/plugins/jquery-ui/jquery-ui.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/bootstrap/js/bootstrap.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/bootstrap-hover-dropdown/bootstrap-hover-dropdown.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/jquery-slimscroll/jquery.slimscroll.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/jquery.blockui.min.js" type="text/javascript"></script>
<script src="/m/global/plugins/uniform/jquery.uniform.min.js" type="text/javascript"></script>
<!-- END CORE PLUGINS -->
<script src="/m/global/scripts/metronic.js" type="text/javascript"></script>
<script src="/m/admin/layout/scripts/layout.js" type="text/javascript"></script>
<script charset="UTF-8" src="/assets/js/moment.js"></script>
<script src="/m/global/plugins/bootstrap-toastr/toastr.min.js"></script>
<script src="/assets/jstree-3.3.8/jstree.min.js"></script>
<script src="/assets/js/bootbox.js"></script>
<script src="/assets/js/angular.js"></script>
<script charset="UTF-8" src="/assets/js/angular-ui-router.min.js"></script>
<script charset="UTF-8" src="/m/global/plugins/bootstrap-select/bootstrap-select.min.js"></script>
<script src="/m/global/plugins/bootstrap-datepicker/js/bootstrap-datepicker.min.js"></script>
<script src="/m/global/plugins/bootstrap-datepicker/locales/bootstrap-datepicker.zh-CN.min.js"></script>
<script src="/m/global/plugins/bootstrap-datetimepicker/js/bootstrap-datetimepicker.min.js"></script>
<script src="/m/global/plugins/bootstrap-datetimepicker/js/locales/bootstrap-datetimepicker.zh-CN.js"></script>
<script src="/assets/js/jquery-validation-1.19.0/dist/jquery.validate.js"></script>
<script src="/m/global/plugins/jquery-file-upload/js/jquery.fileupload.js"></script>
<script src="/m/global/plugins/jquery-file-upload/js/jquery.fileupload-process.js"></script>
<script src="/m/global/plugins/jquery-file-upload/js/jquery.fileupload-validate.js"></script>
<script src="/assets/js/stateEvents.js"></script>
<script src="/assets/js/my-directives.js"></script>
<script src="/assets/js/cmcu-common.js"></script>
<script src="/assets/page/controllers.common.js"></script>
<script src="/assets/page/services.common.js"></script>
<script src="/assets/page/route.common.js"></script>
<script src="/assets/page/services.common.js"></script>
<script src="/editor-app/custom/js/basic.act.js"></script>
<script src="/editor-app/custom/js/services.act.js"></script>
<script src="/editor-app/custom/js/controllers.act.js"></script>
<script src="/assets/page/services.sys.js"></script>
<script src="/assets/page/services.cp.js"></script>
<script src="/assets/page/services.ed.js"></script>
<script src="/assets/page/services.business.js"></script>
<script src="/assets/page/services.five.js"></script>
<script src="/assets/page/services.five.home.js"></script>
<script src="/assets/page/services.five1.js"></script>
<script src="/assets/page/controllers.business.js"></script>
<script src="/assets/page/controllers.sys.js"></script>
<script src="/assets/page/controllers.mcc.js"></script>
<script src="/assets/page/controllers.cp.js"></script>
<script src="/assets/page/controllers.ed.js"></script>
<script src="/assets/page/controllers.ed.part2.js"></script>
<script src="/assets/page/controllers.ed.input.js"></script>
<script src="/assets/page/controllers.five.js"></script>
<script src="/assets/page/controllers.five1.js"></script>
<script src="/assets/page/controllers.five.business.js"></script>
<script src="/assets/page/controllers.five.hr.js"></script>
<script src="/assets/page/controllers.me.js"></script>
<script src="/assets/page/controllers.five.home.js"></script>
<script src="/assets/page/customRoute.js"></script>


<script>
    jQuery(document).ready(function () {
        Metronic.init();
        Layout.init();
    });
    function GetQueryString(name) {
        var reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)");
        var r = window.location.search.substr(1).match(reg);
        if (r != null) return unescape(r[2]);
        return null;
    }

    var APP_VERSION=1;
    var projectId =GetQueryString('projectId');
    var enLogin =GetQueryString('enLogin');
    var tenetId =GetQueryString('tenetId');
    var stepId=GetQueryString('stepId');
    var nodeId=GetQueryString('nodeId');
    var user ={enLogin:enLogin,userLogin:enLogin};
    var taskApp = angular.module('taskApp',
        ['ui.router', 'ui.router.state.events', 'ui.my.directives',"services.common",  "controllers.common","services.act", "controllers.act",
        'controllers.mcc', 'controllers.sys',
        'controllers.cp',
        'controllers.me', 'controllers.business',
        "controllers.five", "controllers.five1", 'controllers.five.business', 'controllers.five.hr', 'controllers.five.home',
        'services.business',
        'services.sys', 'services.cp',  'services.ed',
        'services.five', 'services.five1',  'services.five.home'])
    .config(function ($stateProvider, $urlRouterProvider, $httpProvider, $locationProvider) {


        $httpProvider.interceptors.push('myHttpInterceptor');

        $locationProvider.html5Mode({
            enable: true,
            requireBase: false
        });

        initFiveAndEdDetailRoute($stateProvider);
    });


    taskApp.factory('myHttpInterceptor', function ($rootScope, $q) {
        var httpInterceptor = {
            request: function (config) {
                Metronic.blockUI({
                    boxed: true
                });
                config.requestTimestamp = new Date().getTime();
                return config;
            },
            requestError: function (rejection) {
                Metronic.unblockUI();
                toastr.error(rejection.data.msg);
                return $q.reject(rejection);
            },
            response: function (response) {
                Metronic.unblockUI();
                response.config.responseTimestamp = new Date().getTime();
                //排除掉其他情况,然后判断返回ret:false
                if (response.data.ret != undefined && !response.data.ret) {
                    toastr.error(response.data.msg);
                }
                return response;
            },
            responseError: function (rejection) {
                Metronic.unblockUI();
                toastr.error(rejection.data.msg);
                return $q.reject(rejection);
            }
        };
        return httpInterceptor;
    });


    taskApp.run(function ($rootScope, $state) {
        $rootScope.user = user;
        $rootScope.$on("$stateChangeSuccess", function (event, toState, toParams, fromState, fromParams) {
            $rootScope.previousUrl = fromState.name;
            $rootScope.previoustStateParams = fromParams;
        });
        $rootScope.back = function () {
            if ($rootScope.previoustStateParams) {
                $state.go($rootScope.previousUrl, $rootScope.previoustStateParams);
            }
        };

        $state.go("five.detail", {id: projectId});

    });
</script>
<!-- END JAVASCRIPTS -->
</body>
<!-- END BODY -->
</html>